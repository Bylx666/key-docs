# 字符串`Str`

## 属性

`Str`有5个属性, 均为`Uint`. 

|属性|用途|
|--|--|
|`len`|计算字符数量|
|`lines`|计算字符串的行数|
|`byte_len`|实际的内存长度|
|`capacity`|实际的内存占用大小|
|`ptr`|指针|

字符串还可以使用整数索引读取第`n`个字符的值(只读, 不可写入). 

如果想要写入第`n`个字符, 请使用[`splice`](#splice)方法. 

## 实例方法

### `includes`

传入一个字符串, 判断自己是否包含该字符串 返回`Bool`.

### `starts_with`

传入一个字符串, 判断自己是否以该字符串开头 返回`Bool`.

### `ends_with`

传入一个字符串, 判断自己是否以该字符串结尾 返回`Bool`.

### `index_of` `r_index_of`

传入一个字符串, 从左到右寻找第一个匹配到的索引 返回`Uint`. 如果没结果则返回`uninit`. 

`r_index_of`则是从右到左寻找第一个. 

```ks
log("魔神芙卡洛斯".index_of("芙卡"));
// 2
```

### `cut`

可传入一个整数`i`作为索引(默认`0`), 将索引`i`(包含第`i`个字符)之后的部分切断并返回. 

此时自己会留下上半段, 返回值为下半段. 

```ks
let a = "科比布莱恩特";
log(a.cut(2), a); // 布莱恩特 科比
```

### `insert`

在指定位置插入一个字符串. 

传入两个参数: 整数索引`Uint|Int`和插入的值`Str`. 

无返回值. 

```ks
let a = "1114";
a.insert(2, "45");
log(a); // 114514
```

### `remove`

传入一个整数`Uint|Int`作为索引, 删除索引处的字符并返回被删除的字符. 

可传入第二个整数作为删除字符数量, 不填则为`1`. 

```ks
let a = "二点五条悟";
// 从开头删除2个字符
log(a.remove(0, 2), a);
// 二点 五条悟
```

### `slice`

可选2个参数: 整数起始索引`start`(包含, 默认为`0`), 整数结束索引`end`(不包含, 默认为`str.len`). 

将自己`start`到`end`范围的字符串剪裁出来(不修改原字符串)并返回`Str`. 

### `to_lcase`

将字符串的ascii全部转换为小写(不修改原字符串)并返回. 

### `to_ucase`

将字符串的ascii全部转换为大写(不修改原字符串)并返回. 

### `rev`

无参数, 不修改原字符串, 返回一个新的反转后的字符串. 

### `repeat`

可选一个整数`n`作为参数(默认`0`), 返回一个将自己重复了`n`次的字符串. 

### `replace`

需要2个参数: 被搜索的值`search`(`Str`), 替换为的值`replace`(`Str`), 不修改原字符串, 返回一个替换了所有匹配项的字符串. 

可传入一个整数作为第三个参数, 作为替换次数. 

```ks
let a = "一个一个一个啊啊啊";
// 将前两个 "一个" 替换为空
log(a.replace("一个", "", 2));
// 一个啊啊啊
```

### `splice`

相当于`remove`+`insert`. 可选3个参数: 

|参数|类型|默认值|用途|
|--|--|--|--|
|start|`Uint\|Int`|`0`|删除起点(包含)|
|end|`Uint\|Int`|`str.len`|删除终点(不含)|
|insert|`Str`|`""`|插入的字符串|

删除`start`到`end`范围的字符, 并插入`insert`. 无返回值. 

### `trim`

无参数, 返回一个去除了开头和结尾的空格和换行符的字符串`Str`. 

### `lines`

无参数, 返回一个迭代器, 可得到字符串的每行内容`Str`(`不包括换行符`). 

### `case_eq`

传入另一个字符串`Str`, 忽略大小写地判断自己和它是否相等`Bool`. 

### `split`

可选两个参数: 

|参数|类型|默认值|用途|
|--|--|--|--|
|s|`Str`|`""`|分隔符|
|keep_s|`Bool`|`false`|是否保留分隔符|

将字符串以`s`为分隔符, 分割自己(不修改源字符串)并返回一个`Str`组成的列表`List`. 

如果`keep_s`为`true`, 则会在列表中的每个`Str`结尾保留分隔符. 

### `to_buf`

无参数, 返回自己的字节数组`Buf`. 

### `to_utf16`

无参数, 将自己编码为`utf16`并返回`Buf`. 

## 静态方法

### `from`

需要一个参数, 将其转换为字符串. 

各类型对字符串的转换方式如下

|类型|字符串|
|--|--|
|`uninit`|空字符串`""`|
|数字|转换为其十进制表示|
|`Bool`|`true`或`false`|
|`Func`|`<Function 函数名>`或`<Native Function>`|
|`Str`|直接复制|
|`List`|`[]`包围, 内部的元素逐个依此规则转为字符串并用`, `分隔|
|`Buf`|`Buf[]`包围, 内部的数字逐个按`十六进制`表示并用`, `分隔|
|`Obj`|`{}`包围, 元素依次按`键: 值`表示并用`, `分隔. 键左右没有双引号|
|本地类实例|`类名 {}`包围, 元素依次按`键: 值`表示并用`, `分隔. 键左右没有双引号|
|原生类实例|如果设定了`to_str`则调用它, 否则为`类名 { Native }`|

### `from_utf8`

传入一个数组`Buf`, 将其作为`utf8`解析为`Str`. 

不同于<jmp to="/prim/buf#--转换--">`buf.as_utf8`</jmp>, 该函数将直接为非法字符报错. 

### `from_utf16`

传入一个数组`Buf`, 将其作为`utf16`解析为`Str`. 

不同于<jmp to="/prim/buf#--转换--">`buf.as_utf16`</jmp>, 该函数将直接为非法字符报错. 
