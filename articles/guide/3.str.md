# 字符串

字符串或是一个语言的灵魂, 因为它的可读性沟通了机器和人类. 因此字符串的设计也大幅决定了编程语言的使用体验. 

Key语言使用`utf8`编码, 因此你可能需要确认你的代码编辑器是否在使用`utf8`进行工作, 否则解释器是无法解析你的字符串的. 

## 质符串

`质符串`是一个谐音, 本意是`Raw String`, 可以理解为不加修饰的字符串. 

换句话说, 质符串就是完全没有转义, 完全意义上所见即所得的字符串. 

质符串使用`""`包裹. 

我在说什么? 别急, 直接来看(建议pc用户使用代码框右上角`>`按钮直接尝试): 

```ks
let a = "123
    456
  789{\/}";
// 写的什么就是什么
log(a);
```

这十分可靠, 换句话说, `质符串`最大的缺点似乎只有无法输入`"`符号这一点了. 

如果你需要在字符串中输入`"`符号, 请直接转用``` `` ```包裹的转义字符串. 

## 转义字符串

转义字符串, 我将其称为`Escaper String`, 意思是含有转义符号的字符串. 

转义符号的意思就是使用`\`和另一个能打出来的字符拼起来, 就会合成出一个难以直接打出来的字符. 

转义字符串使用反引号``` `` ```包裹. 

有些转义符非常方便. 我们看些例子: 

```ks
// 我们直接转义换行符!
// 把换行符和下一行开头的空格去掉
let a = `t\
         est`;
// 打印:test
log(a);
```

也可以使用`\n`创建一个换行符: 

```ks
let a = `a\na\na`;
/'
  打印出:
  a
  a
  a
'/
log(a);
```

使用`\\`创建一个`\`: 

```ks
// 打印: \v\
log(`\\v\\`);
```

真神降临之, 使用`{}`捕获环境: 

```ks
let a = 20;
// 在转义字符串中使用{}捕获a的值
// 并使用Int的pow方法得到平方
// 打印: a的平方是:400
log(`a的平方是:{a.pow(2)}`)
```

## 操作字符串

你可以使用`+`拼接字符串, 非字符串会自动转换为字符串. 

```ks
let a = 5;
// 说起来a的值是5么?
log("说起来a的值是" + a + "么?");
```

使用`push`直接为已有字符串追加字符串. 

```ks
let a = "彳";
a.push("亍");
// 打印: 彳亍
log(a);
```

也可以用`slice`方法从字符串中切出一部分. 

```ks
let w = "二点五条悟";
// 从第二个切到第五个字符
// 打印: 五条悟
log(w.slice(2,5));
```

## 比较

字符串之间可以进行比较. 根据其字节码, 谁先出现更大的字节谁大. 

```ks
// 第二个字母中c>b
// 因此为true
log("abc"<"acb");
```

更多方法参见: <jmp to="/prim/str">Str类型</jmp>

## 结语

我的字符串实现或许比起各种主流实现略显自负, 但这只是我理想中的字符串实现. 希望你能稍作习惯. 

下一篇: <jmp to="/guide/4.collect/">集合</jmp>

## 参考

### 各类型转字符串方式:

|类型|字符串|
|--|--|
|`uninit`|空字符串`""`|
|数字|转换为其十进制表示|
|`Bool`|`true`或`false`|
|`Func`|`<Local Function>`或`<Native Function>`|
|`Str`|直接复制|
|`List`|`[]`包围, 内部的元素逐个依此规则转为字符串并用`, `分隔|
|`Buf`|`Buf[]`包围, 内部的数字逐个按`十六进制`表示并用`, `分隔|
|`Obj`|`{}`包围, 元素依次按`键: 值`表示并用`, `分隔. 键左右没有双引号|
|本地类实例|`类名 {}`包围, 元素依次按`键: 值`表示并用`, `分隔. 键左右没有双引号|
|原生类实例|如果设定了`to_str`则调用它, 否则为`类名 { Native }`|

### 基础转义符表

|转义符|实际值|含义|
|--|--|--|
|`\n`|`0x0A`|换行符|
|`\r`|`0x0D`|回车符|
|`\t`|`0x09`|制表符|
|`\\`|`0x5C`|反斜杠|
|`\0`|`0x00`|NULL|
|``` \` ```|`0x60`|反引号|
|`\{`|`0x7B`|左花括号|
